#!/bin/sh;D:/tools/shell/sh.exe

#recup du repertoire d'execution du script
DIR_CURRENT="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
DIR_PRECOMMIT_SCRIPTS=$DIR_CURRENT/"pre-commit-scripts"

#recuperation repertoire projet Git
DIR_GIT_PROJECT="$(git rev-parse --show-toplevel)"

#execution des scripts pre-commit-----------------------------------------------------------------

#verif encodage scripts SQL
echo "Vérification encodage scripts SQL"
echo sh "$DIR_PRECOMMIT_SCRIPTS"/verif-encodage.sh "$DIR_GIT_PROJECT"
sh "$DIR_PRECOMMIT_SCRIPTS"/verif-encodage.sh "$DIR_GIT_PROJECT"
RESULT=$?

if [ $RESULT -ne 0 ];
then
	echo "Fin vérification pre-commit: Etape vérification encodage scripts SQL KO"
	exit 1 # Exit if non-zero exit code
fi 

echo "Fin vérification pre-commit: OK"
exit 0